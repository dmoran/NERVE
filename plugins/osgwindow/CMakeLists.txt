cmake_minimum_required(VERSION 2.8)
set(PLUGIN_FILENAME osgwindow)

PROJECT(${PLUGIN_FILENAME})

set(SRCFILES
	${PLUGIN_FILENAME}.cpp
	${PLUGIN_FILENAME}.ui
	osgwindow_guts.cpp
	osgwindow_plugin.cpp
	osgwindow_interface.cpp
	)
set(HDRFILES
	GuiHeader.h
	osgwindow_plugin.h
	osgwindow_guts.h
	osgwindow_interface.h
	IImpl.h
	Impl.h
	)
set(FILES_TO_UIC
	${PLUGIN_FILENAME}.ui
	)
set(FILES_TO_MOC
	GuiHeader.h
	)


link_directories($ENV{NERVE_LIB_DIR})
include_directories(../../include)

find_package(Qt4 REQUIRED)
include(${QT_USE_FILE})
qt4_wrap_ui(UI_HDRFILES ${FILES_TO_UIC})
qt4_wrap_cpp(MOC_SRCFILES ${FILES_TO_MOC})
list(APPEND SRCFILES ${MOC_SRCFILES})
include_directories(${CMAKE_BINARY_DIR}) #needed so files generated by uic and moc can be found

find_package(OpenSceneGraph 2.8.2 REQUIRED osgViewer OpenThreads osg osgDB osgGA)
include_directories(${OPENSCENEGRAPH_INCLUDE_DIRS})

add_library(${PLUGIN_FILENAME} SHARED ${SRCFILES} ${HDRFILES})
target_link_libraries(${PLUGIN_FILENAME} NerveApp ${QT_LIBRARIES} ${OPENSCENEGRAPH_LIBRARIES})